{"ast":null,"code":"import { GET_PERSONAJES_REQUEST, GET_PERSONAJES_SUCCESS, GET_PERSONAJES_FAIL, SET_PERSONAJES, FILTER_PERSONAJE } from '../constants/page';\n\nfunction setPersonajes(data) {\n  var personajes = data.results.map(function (pokemon) {\n    var url = pokemon.url;\n    pokemon.id = url.substring(34, url.length - 1);\n    pokemon.name = pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1);\n    return pokemon;\n  });\n  return {\n    type: SET_PERSONAJES,\n    payload: personajes\n  };\n}\n\nexport function getPersonajes() {\n  return function (dispatch) {\n    dispatch({\n      type: GET_PERSONAJES_REQUEST\n    });\n    return fetch(\"https://rickandmortyapi.com/api/character/?name=rick&status=alive\").then(function (response) {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(\"\".concat(response.status, \": \").concat(response.statusText));\n    }).then(function (data) {\n      dispatch({\n        type: GET_PERSONAJES_SUCCESS\n      });\n      dispatch(setPersonajes(data));\n      dispatch(filterPersonajes());\n    }).catch(function (error) {\n      dispatch({\n        type: GET_PERSONAJES_FAIL,\n        payload: error.message\n      });\n    });\n  };\n}\nexport function filterPersonajes() {\n  var searchString = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return function (dispatch, getState) {\n    var displayedPokemons = getState().page.pokemons.filter(function (pokemon) {\n      return pokemon.name.toLowerCase().includes(searchString.toLowerCase());\n    });\n    dispatch({\n      type: FILTER_PERSONAJE,\n      payload: displayedPokemons\n    });\n  };\n}","map":{"version":3,"sources":["/home/cesar/Escritorio/miloV2/milotestmorty/src/redux/actions/page.js"],"names":["GET_PERSONAJES_REQUEST","GET_PERSONAJES_SUCCESS","GET_PERSONAJES_FAIL","SET_PERSONAJES","FILTER_PERSONAJE","setPersonajes","data","personajes","results","map","pokemon","url","id","substring","length","name","charAt","toUpperCase","slice","type","payload","getPersonajes","dispatch","fetch","then","response","ok","json","Error","status","statusText","filterPersonajes","catch","error","message","searchString","getState","displayedPokemons","page","pokemons","filter","toLowerCase","includes"],"mappings":"AAAA,SACIA,sBADJ,EAEIC,sBAFJ,EAGIC,mBAHJ,EAIIC,cAJJ,EAKIC,gBALJ,QAMS,mBANT;;AAQE,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAC3B,MAAMC,UAAU,GAAGD,IAAI,CAACE,OAAL,CAAaC,GAAb,CAAiB,UAAAC,OAAO,EAAI;AAAA,QACvCC,GADuC,GAC/BD,OAD+B,CACvCC,GADuC;AAE7CD,IAAAA,OAAO,CAACE,EAAR,GAAaD,GAAG,CAACE,SAAJ,CAAc,EAAd,EAAkBF,GAAG,CAACG,MAAJ,GAAa,CAA/B,CAAb;AACAJ,IAAAA,OAAO,CAACK,IAAR,GAAeL,OAAO,CAACK,IAAR,CAAaC,MAAb,CAAoB,CAApB,EAAuBC,WAAvB,KAAuCP,OAAO,CAACK,IAAR,CAAaG,KAAb,CAAmB,CAAnB,CAAtD;AACA,WAAOR,OAAP;AACD,GALkB,CAAnB;AAOA,SAAO;AACLS,IAAAA,IAAI,EAAEhB,cADD;AAELiB,IAAAA,OAAO,EAAEb;AAFJ,GAAP;AAID;;AAED,OAAO,SAASc,aAAT,GAAyB;AAC9B,SAAO,UAAAC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAAC;AACPH,MAAAA,IAAI,EAAEnB;AADC,KAAD,CAAR;AAIA,WAAOuB,KAAK,qEAAL,CACJC,IADI,CACC,UAAAC,QAAQ,EAAI;AAChB,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACD;;AAED,YAAM,IAAIC,KAAJ,WAAaH,QAAQ,CAACI,MAAtB,eAAiCJ,QAAQ,CAACK,UAA1C,EAAN;AACD,KAPI,EAQJN,IARI,CAQC,UAAAlB,IAAI,EAAI;AACZgB,MAAAA,QAAQ,CAAC;AACPH,QAAAA,IAAI,EAAElB;AADC,OAAD,CAAR;AAGAqB,MAAAA,QAAQ,CAACjB,aAAa,CAACC,IAAD,CAAd,CAAR;AACAgB,MAAAA,QAAQ,CAACS,gBAAgB,EAAjB,CAAR;AACD,KAdI,EAeJC,KAfI,CAeE,UAAAC,KAAK,EAAI;AACdX,MAAAA,QAAQ,CAAC;AACPH,QAAAA,IAAI,EAAEjB,mBADC;AAEPkB,QAAAA,OAAO,EAAEa,KAAK,CAACC;AAFR,OAAD,CAAR;AAID,KApBI,CAAP;AAqBD,GA1BD;AA2BD;AAED,OAAO,SAASH,gBAAT,GAA6C;AAAA,MAAnBI,YAAmB,uEAAJ,EAAI;AAClD,SAAO,UAACb,QAAD,EAAWc,QAAX,EAAwB;AAC7B,QAAMC,iBAAiB,GAAGD,QAAQ,GAAGE,IAAX,CAAgBC,QAAhB,CAAyBC,MAAzB,CAAgC,UAAA9B,OAAO,EAAI;AACnE,aAAOA,OAAO,CAACK,IAAR,CAAa0B,WAAb,GAA2BC,QAA3B,CAAoCP,YAAY,CAACM,WAAb,EAApC,CAAP;AACD,KAFyB,CAA1B;AAIAnB,IAAAA,QAAQ,CAAC;AACPH,MAAAA,IAAI,EAAEf,gBADC;AAEPgB,MAAAA,OAAO,EAAEiB;AAFF,KAAD,CAAR;AAID,GATD;AAUD","sourcesContent":["import {\n    GET_PERSONAJES_REQUEST,\n    GET_PERSONAJES_SUCCESS,\n    GET_PERSONAJES_FAIL,\n    SET_PERSONAJES,\n    FILTER_PERSONAJE\n  } from '../constants/page'\n  \n  function setPersonajes(data) {\n    const personajes = data.results.map(pokemon => {\n      let { url } = pokemon\n      pokemon.id = url.substring(34, url.length - 1)\n      pokemon.name = pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1)\n      return pokemon\n    })\n  \n    return {\n      type: SET_PERSONAJES,\n      payload: personajes\n    }\n  }\n  \n  export function getPersonajes() {\n    return dispatch => {\n      dispatch({\n        type: GET_PERSONAJES_REQUEST\n      })\n  \n      return fetch(`https://rickandmortyapi.com/api/character/?name=rick&status=alive`)\n        .then(response => {\n          if (response.ok) {\n            return response.json()\n          }\n  \n          throw new Error(`${response.status}: ${response.statusText}`)\n        })\n        .then(data => {\n          dispatch({\n            type: GET_PERSONAJES_SUCCESS\n          })\n          dispatch(setPersonajes(data))\n          dispatch(filterPersonajes())\n        })\n        .catch(error => {\n          dispatch({\n            type: GET_PERSONAJES_FAIL,\n            payload: error.message\n          })\n        })\n    }\n  }\n  \n  export function filterPersonajes(searchString = '') {\n    return (dispatch, getState) => {\n      const displayedPokemons = getState().page.pokemons.filter(pokemon => {\n        return pokemon.name.toLowerCase().includes(searchString.toLowerCase())\n      })\n  \n      dispatch({\n        type: FILTER_PERSONAJE,\n        payload: displayedPokemons\n      })\n    }\n  }\n  "]},"metadata":{},"sourceType":"module"}